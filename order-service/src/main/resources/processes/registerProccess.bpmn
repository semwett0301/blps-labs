<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_0uh8fns" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.12.0" modeler:executionPlatform="Camunda Platform" modeler:executionPlatformVersion="7.19.0">
  <bpmn:collaboration id="Collaboration_1l1qdh6">
    <bpmn:participant id="Participant_15q2ucz" name="Registration process" processRef="Register" />
  </bpmn:collaboration>
  <bpmn:process id="Register" name="Register Proccess" isExecutable="false">
    <bpmn:laneSet id="LaneSet_1sl7zzi">
      <bpmn:lane id="Lane_0fupd0k" name="Customer">
        <bpmn:flowNodeRef>Activity_08rwxir</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>StartEvent_1</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_0uc7a4f" name="AuthService">
        <bpmn:flowNodeRef>Activity_04qsu7j</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Event_11ugazs</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Event_15w9tmt</bpmn:flowNodeRef>
      </bpmn:lane>
    </bpmn:laneSet>
    <bpmn:userTask id="Activity_08rwxir" name="Fill register form" camunda:formKey="camunda-forms:/forms/registerForm.form">
      <bpmn:extensionElements />
      <bpmn:incoming>Flow_0fnjdcj</bpmn:incoming>
      <bpmn:incoming>Flow_1f6uos9</bpmn:incoming>
      <bpmn:outgoing>Flow_1bd88ka</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:serviceTask id="Activity_04qsu7j" name="Register user" camunda:class="com.example.code.deligators.RegistrationDeligator">
      <bpmn:incoming>Flow_1bd88ka</bpmn:incoming>
      <bpmn:outgoing>Flow_0gobea1</bpmn:outgoing>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_0j2knqp">
        <bpmn:targetRef>DataStoreReference_0txyj8w</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:serviceTask>
    <bpmn:endEvent id="Event_15w9tmt" name="User registered">
      <bpmn:incoming>Flow_0gobea1</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_0fnjdcj" sourceRef="StartEvent_1" targetRef="Activity_08rwxir" />
    <bpmn:sequenceFlow id="Flow_1bd88ka" sourceRef="Activity_08rwxir" targetRef="Activity_04qsu7j" />
    <bpmn:sequenceFlow id="Flow_0gobea1" sourceRef="Activity_04qsu7j" targetRef="Event_15w9tmt" />
    <bpmn:boundaryEvent id="Event_11ugazs" name="User already exist" attachedToRef="Activity_04qsu7j">
      <bpmn:extensionElements>
        <camunda:executionListener class="com.example.code.model.exceptions.UserAlreadyExistException" event="start" />
      </bpmn:extensionElements>
      <bpmn:outgoing>Flow_1f6uos9</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_1hbwka5" errorRef="Error_0ktimaj" camunda:errorCodeVariable="errCode" camunda:errorMessageVariable="message" />
    </bpmn:boundaryEvent>
    <bpmn:startEvent id="StartEvent_1" name="Open registration page">
      <bpmn:outgoing>Flow_0fnjdcj</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:dataStoreReference id="DataStoreReference_0txyj8w" name="postgre">
      <bpmn:extensionElements />
    </bpmn:dataStoreReference>
    <bpmn:sequenceFlow id="Flow_1f6uos9" sourceRef="Event_11ugazs" targetRef="Activity_08rwxir" />
  </bpmn:process>
  <bpmn:error id="Error_0ktimaj" name="USER_ALREADY_EXIST" errorCode="406" camunda:errorMessage="User already exist" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_1l1qdh6">
      <bpmndi:BPMNShape id="Participant_15q2ucz_di" bpmnElement="Participant_15q2ucz" isHorizontal="true">
        <dc:Bounds x="190" y="80" width="735" height="440" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_0uc7a4f_di" bpmnElement="Lane_0uc7a4f" isHorizontal="true">
        <dc:Bounds x="220" y="300" width="705" height="220" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_0fupd0k_di" bpmnElement="Lane_0fupd0k" isHorizontal="true">
        <dc:Bounds x="220" y="80" width="705" height="220" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_08rwxir_di" bpmnElement="Activity_08rwxir">
        <dc:Bounds x="400" y="170" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_04qsu7j_di" bpmnElement="Activity_04qsu7j">
        <dc:Bounds x="400" y="390" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_15w9tmt_di" bpmnElement="Event_15w9tmt">
        <dc:Bounds x="632" y="412" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="612" y="455" width="76" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">
        <dc:Bounds x="282" y="192" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="258" y="235" width="85" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_0txyj8w_di" bpmnElement="DataStoreReference_0txyj8w">
        <dc:Bounds x="535" y="315" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="542" y="372" width="37" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_11ugazs_di" bpmnElement="Event_11ugazs">
        <dc:Bounds x="382" y="452" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="355" y="493" width="89" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0fnjdcj_di" bpmnElement="Flow_0fnjdcj">
        <di:waypoint x="318" y="210" />
        <di:waypoint x="400" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1bd88ka_di" bpmnElement="Flow_1bd88ka">
        <di:waypoint x="450" y="250" />
        <di:waypoint x="450" y="390" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0gobea1_di" bpmnElement="Flow_0gobea1">
        <di:waypoint x="500" y="430" />
        <di:waypoint x="632" y="430" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1f6uos9_di" bpmnElement="Flow_1f6uos9">
        <di:waypoint x="382" y="470" />
        <di:waypoint x="362" y="470" />
        <di:waypoint x="362" y="360" />
        <di:waypoint x="410" y="360" />
        <di:waypoint x="410" y="250" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataOutputAssociation_0j2knqp_di" bpmnElement="DataOutputAssociation_0j2knqp">
        <di:waypoint x="495" y="391" />
        <di:waypoint x="535" y="357" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
